<?xml version="1.0" encoding="UTF-8"?>

<library name="Network" directory="Network">

  <include file="lbcpp/Network/NetworkClient.h"/>
  <include file="lbcpp/Network/NetworkServer.h"/>
  <include file="lbcpp/Network/NetworkMessage.h"/>
  <include file="lbcpp/Network/Manager.h"/>

  <class name="NetworkClient" base="Object" abstract="yes"/>
  <class name="NetworkServer" base="Object" abstract="yes"/>

  <!-- WorkUnitNetworkRequest -->
  <class name="WorkUnitNetworkRequest" base="Object">
    <variable type="String" name="uniqueIdentifier"/>
    <variable type="XmlElement" name="workUnit"/>
    <variable type="String" name="projectName"/>
    <variable type="String" name="source"/>
    <variable type="String" name="destination"/>
    <variable type="Integer" name="requiredCpus"/>
    <variable type="Integer" name="requiredMemory"/>
    <variable type="Integer" name="requiredTime"/>
  </class>

  <!-- NetworkMessage -->
  <class name="NetworkMessage" base="Object" abstract="yes"/>
  
  <class name="WorkUnitRequestNetworkMessage" base="NetworkMessage">
    <variable type="PositiveInteger" name="sourceIdentifier"/>
    <variable type="WorkUnitNetworkRequest" name="request"/>
  </class>

  <class name="WorkUnitAcknowledgementNetworkMessage" base="NetworkMessage">
    <variable type="PositiveInteger" name="sourceIdentifier"/>
    <variable type="String" name="uniqueIdentifier"/>
  </class>

  <class name="WorkUnitResultNetworkMessage" base="NetworkMessage">
    <variable type="String" name="uniqueIdentifier"/>
    <variable type="XmlElement" name="result"/>
  </class>

  <class name="GetWorkUnitResultNetworkMessage" base="NetworkMessage">
    <variable type="String" name="uniqueIdentifier"/>
  </class>
  
  <class name="GetWaitingWorkUnitsNetworkMessage" base="NetworkMessage">
    <variable type="String" name="gridName"/>
  </class>

  <class name="WorkUnitRequestsNetworkMessage" base="NetworkMessage">
    <variable type="ObjectVector[WorkUnitNetworkRequest]" name="requests"/>
  </class>

  <class name="ExecutionTracesNetworkMessage" base="NetworkMessage">
    <variable type="ObjectVector[Pair[String, XmlElement]]" name="traces"/>
  </class>
  
  <class name="CloseCommunicationNetworkMessage" base="NetworkMessage"/>
  
  <!-- WorkUnit -->
  <class name="ServerWorkUnit" base="WorkUnit">
    <variable type="PositiveInteger" name="port" shortName="p"/>
  </class>

  <class name="GridWorkUnit" base="WorkUnit">
    <variable type="String" name="clientType" shortName="c" description="Type of grid: local, sge"/>
    <variable type="String" name="gridName" shortName="g"/>
    <variable type="String" name="managerHostName" shortName"h"/>
    <variable type="PositiveInteger" name="managerPort" shortName="p"/>
  </class>

  <class name="XmlElementWorkUnit" base="WorkUnit">
    <variable type="File" name="xmlElementFile" shortName="f"/>
  </class>
</library>
