<?xml version="1.0" encoding="UTF-8"?>

<library name="ProteinRosetta" directory="Rosetta">

  <!-- Imports -->
  <import name="ProteinRosettaMover"/>
  <import name="ProteinRosettaOptimizer"/>
  <import name="ProteinRosettaSampler"/>
  
  <class name="RosettaWorker" base="Object">
    <variable type="RosettaProtein" name="protein"/> 
    <variable type="RosettaProteinFeatures" name="features"/>
    <variable type="PositiveInteger" name="learningPolicy"/>
  </class>

  <class name="RosettaProteinFeatures" base="CompositeFunction">
    <constructor arguments="size_t residues, size_t energy, size_t histogram, size_t distances"/>
    <variable type="PositiveInteger" name="selectResiduesFeatures"/> 
    <variable type="PositiveInteger" name="selectEnergyFeatures"/>
    <variable type="PositiveInteger" name="selectHistogramFeatures"/>
    <variable type="PositiveInteger" name="selectDistanceFeatures"/>
  </class>
  
  <class name="RosettaProteinResidueHistogramFeatureGenerator" base="FeatureGenerator">
  </class>
  
  <class name="RosettaProtein" base="Object">
    <variable type="PositiveInteger" name="numResidues"/>
    <variable type="Double" name="energy"/>
    <variable type="Double" name="score"/>
    <variable type="Double" name="normalizedScore"/>
    <variable type="DoubleVector[AminoAcidType,Double]" name="histogram"/>
    <variable type="Double" name="shortDistance"/>
    <variable type="Double" name="longDistance"/>
    <variable type="PositiveInteger" name="computeResidues"/>
    <variable type="PositiveInteger" name="computeEnergy"/>
    <variable type="PositiveInteger" name="computeHistogram"/>
    <variable type="PositiveInteger" name="computeDistances"/>
  </class>
  
  <!-- Movers -->
  <class name="ProteinMover" base="Object" abstract="yes">
  </class>
  
  <!-- Optimizers -->
  <class name="ProteinEDAOptimizer" base="Object">
    <variable type="Double" name="energyWeight" description="The ponderation factor between energy and structure score"/>
  </class>
  
  <class name="ProteinOptimizer" base="Object" abstract="yes">
    <variable type="GenericVector[String]" name="nameScopes" description="Name of the different scopes used for verbosity in explorer"/>
    <variable type="Boolean" name="verbosity" description="Indicates if there is verbosity to the explorer"/>
    <variable type="Boolean" name="saveToFile" description="Indicates if there is verbosity to files"/>
    <variable type="Boolean" name="nameScopesSet" description="Indicates if the name scopes are set"/>
    <variable type="Double" name="frequencyVerbosity" description="Frequency at which information are output"/>
    <variable type="Integer" name="numOutputFiles" description="Number of files that have to be created with current structure information"/>  
    <variable type="String" name="name" description="Name of the protein optimized"/>
    <variable type="File" name="outputDirectory" description="Output directory where the files are going to be created"/>
  </class>
  
  <!-- WorkUnits -->
  <class name="ProteinOptimizationWithLearningWorkUnit" base="WorkUnit">
    <variable type="String" name="inputDirectory"/>
    <variable type="String" name="outputDirectory"/>
    <variable type="String" name="referencesDirectory"/>
    <variable type="String" name="moversDirectory"/>
    <variable type="PositiveInteger" name="learningPolicy"/>
    <variable type="PositiveInteger" name="residueFeatures"/>
    <variable type="PositiveInteger" name="energyFeatures"/>
    <variable type="PositiveInteger" name="histogramFeatures"/>
    <variable type="PositiveInteger" name="distanceFeatures"/>
  </class>
  
  <class name="RosettaTest" base="WorkUnit">
    <variable type="Double" name="value"/>
    <variable type="Integer" name="arg" shortName="a" description="An input argument to RosettaTest"/>
    <variable type="String" name="proteinsDir" shortName="d" description="Directory of proteins to load"/>
    <variable type="ProteinMover" name="moverEnter"/>
  </class>

  <class name="ProteinFeaturesGeneratorWorkUnit" base="WorkUnit">
    <variable type="String" name="proteinsDirectory" shortName="i" description="Directory of input proteins to load"/>
    <variable type="String" name="resultsDirectory" shortName="o" description="Directory where to store the outputs"/>
    <variable type="Integer" name="oneOrAll" description="If is 0, select phipsi mover only. Otherwise, uses all movers"/>
    <variable type="Integer" name="timesFeatureGeneration" shortName="t" description="Number of generate output files for one protein. So one file generated every maxNumberIterations/timesFeatureGeneration."/>
    <variable type="Integer" name="maxNumberIterations" shortName="m" description="Max number of desired iterations for the optimization"/>
  </class>
  
  <class name="ProteinOptimizerWorkUnit" base="CompositeWorkUnit">
  </class>
  
  <class name="XmlToPDBConverterWorkUnit" base="WorkUnit">
    <variable type="String" name="proteinsDirectory" shortName="i" description="Directory of input proteins to load"/>
    <variable type="String" name="resultsDirectory" shortName="o" description="Directory where to store the outputs"/>
  </class>
  
  <class name="EnergyAndQScoreComparisonWorkUnit" base="WorkUnit">
    <variable type="String" name="referenceDirectory" description="Directory of reference proteins to load"/>
    <variable type="String" name="targetDirectory" description="Directory of target proteins to load"/>
    <variable type="String" name="outputPath" description="Path of the file containing the results"/>
  </class>
  
  <class name="FilesHarmonizationWorkUnit" base="WorkUnit">
    <variable type="String" name="proteinsDirectory" shortName="i" description="Directory of input proteins to load"/>
  </class>  
  
  <class name="SamplerGenerationWorkUnit" base="WorkUnit">
    <variable type="String" name="referenceDirectory" description="Directory where one can find the real proteins"/>
    <variable type="String" name="targetDirectory" description="Directory where one can find the intermediate proteins"/>
    <variable type="String" name="outputDirectory" description="Directory where to store the samplers created for each intermediate protein"/>
    <variable type="Double" name="energyWeight" description="The weight of the energy in the score of the EDA optimizer"/>
    <variable type="Integer" name="numIterations" description="Maximum number of iterations performed by the EDA optimizer"/>
    <variable type="Integer" name="numSamples" description="Number of samples generated at each iteration of the EDA optimization"/>
    <variable type="Integer" name="includeBestMoversInLearning" description="If true, includes best movers in learning in addition to the best found at this iteration"/>  
    <variable type="Integer" name="numMoversToKeep" description="Number of movers generated by the EDA optimization"/>
    <variable type="Integer" name="oneOrAll" description="If is 0, select phipsi mover only. Otherwise, uses all movers"/>
    <variable type="Integer" name="numGoodSamples"/>
  </class>
  
  <class name="ConformationSortingWorkUnit" base="WorkUnit">
    <variable type="String" name="referenceDir"/>
    <variable type="String" name="targetDir"/>
    <variable type="Boolean" name="del"/>
  </class>

  <enumeration name="FeaturesMoverEnumeration">
    <value name="numResidues"/>
    <value name="first"/>
    <value name="second"/>
  </enumeration>
  
  <!-- Francis -->
  <class name="RosettaSandBox" base="WorkUnit">
    <variable type="PositiveInteger" name="numExamples"/>
  </class>
  
</library>
