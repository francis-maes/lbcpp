<?xml version="1.0" encoding="UTF-8"?>

<library name="ProteinPredictor" directory="Predictor">

  <class name="ProteinPrimaryPerception" base="Object" abstract="yes">
    <variable type="Protein" name="protein"/>
    <variable type="PositiveInteger" name="length"/>
    <variable type="PositiveInteger" name="numCysteins"/>
  </class>

  <template name="NumericalProteinPrimaryFeatures" base="ProteinPrimaryPerception">
    <parameter name="featuresEnumeration"/>
    <parameter name="globalFeaturesEnumeration"/>
    <variable type="Vector[DoubleVector[featuresEnumeration, Double]]" name="primaryResidueFeatures"/>
    <variable type="Container[DenseDoubleVector[AddMissingToEnumeration[featuresEnumeration], Double]]" name="accumulator"/>
    <variable type="DenseDoubleVector[globalFeaturesEnumeration, Double]" name="globalFeatures"/>
  </template>
  
  <class name="ProteinLengthFunction" base="SimpleUnaryFunction"/>
  <class name="NumCysteinsFunction" base="SimpleUnaryFunction"/>
  
  <class name="CreateProteinPerceptionFunction" base="Function"/>
  <class name="SubtractFunction" base="Function"/>
  <class name="CreateDisulfideSymmetricMatrixFunction" base="Function">
    <variable type="Function" name="elementGeneratorFunction"/>
  </class>
  <class name="CreateCysteinBondingStateVectorFunction" base="Function">
    <variable type="Function" name="elementGeneratorFunction"/>
  </class>
  <class name="CreateCysteinSeparationProfil" base="Function"/>
  <class name="CysteinBondingStateRatio" base="SimpleUnaryFunction"/>

  <class name="GreedyDisulfideBondRatio" base="SimpleUnaryFunction">
    <variable type="PositiveInteger" name="minimumDistanceFromDiagonal"/>
  </class>
  <class name="GreedyDisulfideBondSumOfRow" base="Function">
    <variable type="PositiveInteger" name="minimumDistanceFromDiagonal"/>
  </class>

  <class name="GetDoubleVectorValueFunction" base="FeatureGenerator"/>
  
  <class name="GetSupervisionFunction" base="Function"/>
  
  <class name="SumDoubleVectorFunction" base="Function"/>
  
  <class name="GetPairBondingStateProbabilities" base="FeatureGenerator">
    <variable type="Boolean" name="useSpecialFeatures"/>
  </class>

  <class name="GetBondingStateProbabilities" base="FeatureGenerator">
    <variable type="Boolean" name="useSpecialFeatures"/>
  </class>
  
  <class name="IsNumCysteinPair" base="FeatureGenerator"/>
  
  <class name="ProteinPredictor" base="CompositeFunction">
    <variable type="ProteinPredictorParameters" name="parameters"/>
    <variable type="GenericVector[Pair[VariablesEnumeration[Protein], Function]]" name="targetPredictors"/>
    <variable type="Boolean" name="activeGlobalPerception"/>
    <variable type="Boolean" name="activeResiduePerception"/>
    <varaible type="Boolean" name="activeResiduePairPerception"/>
    <variable type="Boolean" name="activeDisulfideResiduePairPerception"/>
    <variable type="Boolean" name="activeCysteinResiduePerception"/>
  </class>
  
  <class name="ProteinSequentialPredictor" base="CompositeFunction">
    <variable type="ObjectVector[ProteinPredictor]" name="predictors"/>
  </class>

  <class name="ProteinPredictorParameters" base="Object" abstract="yes"/>

  <class name="NumericalProteinFeaturesParameters" shortName="features">
    <variable type="PositiveInteger" name="pssmDiscretization"/>
    <variable type="PositiveInteger" name="pssmEntropyDiscretization"/>

    <variable type="PositiveInteger" name="ss3Discretization"/>
    <variable type="PositiveInteger" name="ss3EntropyDiscretization"/>

    <variable type="PositiveInteger" name="ss8Discretization"/>
    <variable type="PositiveInteger" name="ss8EntropyDiscretization"/>

    <variable type="PositiveInteger" name="stalDiscretization"/>
    <variable type="PositiveInteger" name="stalEntropyDiscretization"/>

    <variable type="PositiveInteger" name="sa20Discretization"/>
    
    <variable type="PositiveInteger" name="drDiscretization"/>

<!--    <variable type="Boolean" name="residuePairGlobalFeatures" description="Incorporate global mean features"/> -->
    <variable type="PositiveInteger" name="residueWindowSize" description="The size of the residues window"/>
<!--    <variable type="PositiveInteger" name="residueLocalMeanSize" description="The size of the first residue local mean"/> -->
<!--    <variable type="PositiveInteger" name="residueMediumMeanSize" description="The size of the second residue local mean"/> -->
  </class>
  
  <class name="NumericalProteinPredictorParameters" base="ProteinPredictorParameters" shortName="numerical">
    <constructor arguments="NumericalProteinFeaturesParametersPtr featuresParameters, LearnerParametersPtr learningParameters"/>
    <constructor/>
    <variable type="NumericalProteinFeaturesParameters" name="featuresParameters" shortName="f"/>
    <variable type="LearnerParameters" name="learningParameters" shortName="l"/>
  </class>
  
  <class name="NumericalCysteinFeaturesParameters" base="Object" shortName="ncFeatures">
    <variable type="Boolean" name="useProteinLength"/>
    <variable type="Boolean" name="useDiscretizeProteinLength"/>
    <variable type="PositiveInteger" name="residueWindowSize"/>
    <variable type="PositiveInteger" name="localHistogramSize"/>
    <variable type="PositiveInteger" name="separationProfilSize"/>
    <variable type="Boolean" name="useSymmetricFeature"/>
    <variable type="Boolean" name="useIntervalHistogram"/>
    <variable type="Boolean" name="useAADistance"/>
    <variable type="PositiveInteger" name="pairWindowSize"/>
    <variable type="PositiveInteger" name="normalizedWindowSize"/>
    <variable type="Boolean" name="useExtendedD1Feature"/>
    <variable type="PositiveInteger" name="d1WindowSize"/>
    <variable type="Boolean" name="useExtendedD2Feature"/>
    <variable type="Boolean" name="useCysteinPositionDifference"/>
    <variable type="Boolean" name="useCysteinIndexDifference"/>
    <variable type="Boolean" name="useConnectivityPattern"/>
    <variable type="Boolean" name="useCartesianConnectivity"/>
    <variable type="Boolean" name="useConnectivityStats"/>
  </class>
  
  <class name="NumericalCysteinPredictorParameters" base="ProteinPredictorParameters" shortName="numericalCystein">
    <constructor/>
    <variable type="Boolean" name="useAddBiasLearner"/>
    <variable type="NumericalCysteinFeaturesParameters" name="fp"/>
    <variable type="LearnerParameters" name="learningParameters" shortName="l"/>
    <variable type="Boolean" name="useOracleD0"/>
    <variable type="Boolean" name="useOracleD1"/>
    <variable type="Boolean" name="useOracleD2"/>
    <variable type="Boolean" name="useGlobalFeature"/>
  </class>
  
  <!-- Connectivity Pattern Classifier -->
  <class name="AddConnectivityPatternBiasBatchLearner" base="BatchLearner"/>

  <class name="AddConnectivityPatternBiasLearnableFunction" base="Function">
    <variable type="Double" name="bias"/>
  </class>

  <class name="NoPostProcessingLinearBinaryClassifier" base="SupervisedNumericalFunction"/>

  <class name="ConnectivityPatternClassifier" base="CompositeFunction">
    <variable type="LearnerParameters" name="learningParameters"/>
  </class>
  
  <!-- BEGIN Article: Lin 2009 -->
  <class name="NormalizedCysteinPositionDifference" base="FeatureGenerator"/>
  <class name="NormalizedCysteinIndexDifference" base="FeatureGenerator"/>
  
  <class name="Lin09PredictorParameters" base="ProteinPredictorParameters" shortName="lin09">
    <variable type="Double" name="C"/>
    <variable type="Double" name="kernelGamma"/>
  </class>
  <!-- END Article: Lin 2009 -->

</library>
