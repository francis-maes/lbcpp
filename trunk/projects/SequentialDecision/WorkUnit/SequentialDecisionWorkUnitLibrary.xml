<?xml version="1.0" encoding="UTF-8"?>

<library name="SequentialDecisionWorkUnit" directory="WorkUnit">

  <!-- LinearLearnableHeuristic -->
  <class name="SearchTreeNodeIndexFeatureGenerator" base="FeatureGenerator"/>

  <class name="HeuristicSearchTreeNodeFeaturesFunction" base="CompositeFunction"/>
  <class name="GenericClosedSearchTreeNodeFeaturesFunction" base="CompositeFunction"/>
  <class name="LinearLearnableSearchHeuristic" base="LearnableSearchHeuristic"/>

  <class name="SequentialDecisionSandBox" base="WorkUnit">
    <variable type="DecisionProblem" name="problem" shortName="p"/>
    <variable type="RankingLossFunction" name="rankingLoss" shortName="l" description="E.g. mostViolatedPair(hinge), allPairs(logBinomial)"/>
    <variable type="PositiveInteger" name="numInitialStates" shortName="n"/>
    <variable type="PositiveInteger" name="maxSearchNodes" shortName="m"/>
    <variable type="PositiveInteger" name="beamSize" shortName="b"/>
    <variable type="PositiveInteger" name="maxLearningIterations" shortName="i"/>
    <variable type="PositiveInteger" name="numPasses" shortName="N"/>
  </class>
  
  <!-- HIV -->
  <class name="WeightedRewardsFeatureGenerator" base="FeatureGenerator" shortName="weightedRewardsSearchNodeFeatures"/>
  <class name="SimpleSearchNodeFeatureGenerator" base="CompositeFunction" shortName="simpleSearchNodeFeatures">
    <variable type="Boolean" name="applyLog"/>
    <variable type="Boolean" name="includeUnit"/>
  </class>

  <class name="HIVStateFeatures" base="CompositeFunction"/>
  <class name="LPPStateFeatures" base="CompositeFunction"/>
  
  <class name="HIVSearchFeatures" base="CompositeFunction">
    <variable type="Double" name="discount"/>
    <variable type="Double" name="maxReward"/>
    <variable type="Double" name="maxDepth"/>
    <variable type="Function" name="stateFeatures"/>
  </class>

  <class name="HIVSearchHeuristic" base="LearnableSearchHeuristic">
    <variable type="Function" name="featuresFunction"/>
    <variable type="Enumeration" name="featuresEnumeration" generated="yes"/>
    <variable type="DenseDoubleVector[EnumValue,Double]" name="parameters"/>
  </class>

  <class name="HIVSandBox" base="WorkUnit">
    <variable type="DecisionProblem" name="problem" shortName="dp"/>
    <variable type="Function" name="featuresFunction" shortName="phi"/>
    <variable type="PositiveInteger" name="minDepth" shortName="dmin"/>
    <variable type="PositiveInteger" name="maxDepth" shortName="dmax"/>
    <variable type="Boolean" name="depthIsBudget"/>
    <variable type="PositiveInteger" name="maxHorizon" shortName="h"/>
    <variable type="PositiveInteger" name="numInitialStates"/>
    <variable type="Boolean" name="verboseTrajectories"/>
    <variable type="Boolean" name="computeGeneralization"/>
    
    <variable type="PositiveInteger" name="iterations" shortName="i"/>
    <variable type="PositiveInteger" name="populationSize" shortName="p"/>
    <variable type="PositiveInteger" name="numBests" shortName="n"/>
    <variable type="Boolean" name="reinjectBest"/>

    <variable type="Boolean" name="baseHeuristics"/>
    <variable type="Boolean" name="optimisticHeuristics"/>
    <variable type="Boolean" name="learnedHeuristic"/>
    <variable type="File" name="loadedHeuristics"/>
  </class>
  
  <!-- Bandits -->
  <class name="BanditStatistics" base="Object">
    
  </class>

  <class name="DiscreteBanditPolicy" base="Object" abstract="yes">
    <!--
    <variable type="PositiveInteger" name="timeStep"/>
    <variable type="ObjectVector[BanditStatistics]" name="banditStatistics"/>
    -->
  </class>
  <class name="IndexBasedDiscreteBanditPolicy" base="DiscreteBanditPolicy" abstract="yes"/>

  <class name="UCB1DiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb1"/>
  <class name="UCB1TunedDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb1Tuned"/>
  <class name="UCB2DiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb2">
    <variable type="Double" name="alpha"/>
  </class>
  <class name="UCB1NormalDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb1Normal"/>

  <class name="UCBvDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucbv">
    <variable type="Double" name="c"/>
    <variable type="Double" name="zeta"/>
  </class>

  <class name="EpsilonGreedyDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="epsilonGreedy">
    <variable type="Double" name="c"/>
    <variable type="Double" name="d"/>
  </class>

  <class name="WeightedUCBBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="weightedUCB">
    <variable type="Double" name="C"/>
  </class>
  
  <enumeration name="TimeDependentWeightedUCBBanditPolicyEnumeration">
    <value name="1"/>
    <value name="log10(timeStep)"/>
    <value name="playedCount"/>
  </enumeration>

  <class name="TimeDependentWeightedUCBBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="timeDependentWeightedUCB">
    <variable type="DenseDoubleVector[TimeDependentWeightedUCBBanditPolicyEnumeration,Double]" name="parameters"/>
  </class>
<!--
  <class name="MomentsWeightedUCBBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="momentsWeighted">
    <variable type="DenseDoubleVector[EnumValue,Double]" name="parameters"/>
  </class>
  -->

  <class name="PowerFunctionParameterizedBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="powerFunction">
    <variable type="PositiveInteger" name="maxPower"/>
    <variable type="Enumeration" name="parametersEnumeration" generated="yes"/>
    <variable type="DenseDoubleVector[EnumValue,Double]" name="parameters"/>
  </class>
  
  <enumeration name="OldStyleParameterizedBanditPolicyEnumeration">
    <value name="mean(reward)"/>
    <value name="stddev(reward)"/>
    <value name="conf(reward)"/>
    <value name="log(timeStep).mean(reward)"/>
    <value name="log(timeStep).stddev(reward)"/>
    <value name="log(timeStep).conf(reward)"/>
    <value name="mean(reward)^2"/>
    <value name="mean(reward).stddev(reward)"/>
    <value name="mean(reward).conf(reward)"/>
    <value name="variance(reward)"/>
    <value name="stddev(reward).conf(reward)"/>
    <value name="conf(reward)^2"/>
  </enumeration>
  
  <class name="OldStyleParameterizedBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="oldStyle">
    <variable type="DenseDoubleVector[OldStyleParameterizedBanditPolicyEnumeration,Double]" name="parameters"/>
  </class>

  <class name="BanditTimeFeatureGenerator" base="FeatureGenerator"/>
  <class name="BanditStatisticFeatureGenerator" base="FeatureGenerator"/>
  <class name="UltimateParameterizedBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="oldStyle">
    <variable type="Enumeration" name="parametersEnumeration" generated="yes"/>
    <variable type="DenseDoubleVector[EnumValue,Double]" name="parameters"/>
  </class>
  

  <class name="EvaluateDiscreteBanditPolicyWorkUnit" base="WorkUnit">
    <variable type="PositiveInteger" name="numBandits"/>
    <variable type="PositiveInteger" name="maxTimeStep"/>
    <variable type="ObjectVector[DiscreteBanditState]" name="initialStates"/>
    <variable type="DiscreteBanditPolicy" name="policy"/>
    <variable type="PositiveInteger" name="numEstimationsPerBandit"/>
    <variable type="Boolean" name="verbose"/>
  </class>
  
  <class name="EvaluateOptimizedDiscreteBanditPolicyParameters" base="Function">
    <variable type="DiscreteBanditPolicy" name="policy"/>
    <variable type="PositiveInteger" name="numBandits"/>
    <variable type="PositiveInteger" name="maxTimeStep"/>
    <variable type="ObjectVector[DiscreteBanditState]" name="initialStates"/>
    <variable type="Boolean" name="verbose"/>
  </class>

  <class name="EvaluateDiscreteBanditPolicy" base="WorkUnit">
    <variable type="File" name="policyFile" shortName="p"/>
    <variable type="PositiveInteger" name="numBandits" shortName="m"/>
    <variable type="PositiveInteger" name="numProblems" shortName="n"/>
  </class>

  <class name="BanditsSandBox" base="WorkUnit">
    <variable type="PositiveInteger" name="numBandits" shortName="K"/>
    <variable type="PositiveInteger" name="maxTimeStep" shortName="N"/>
    <variable type="PositiveInteger" name="numTrainingProblems" shortName="T"/>
    <variable type="PositiveInteger" name="numTestingProblems"/>
    <!-- <variable type="DiscreteBanditPolicy" name="policyToOptimize" shortName="p"/> -->
  </class>

  <!-- GP SandBox -->
  <enumeration name="GPOperator">
    <value name="addition" shortName="+"/>
    <value name="subtraction" shortName="-"/>
    <value name="multiplication" shortName="*"/>
    <value name="division" shortName="/"/>
  </enumeration>

  <enumeration name="GPPre">
    <value name="sinus" shortName="sin"/>
    <value name="cosinus" shortName="cos"/>
    <value name="exponential" shortName="exp"/>
    <value name="logarithm" shortName="log"/>
  </enumeration>

  <class name="GPExpr" base="Object" abstract="yes"/>
  <class name="BinaryGPExpr" base="GPExpr" shortName="binary">
    <variable type="GPExpr" name="left"/>
    <variable type="GPOperator" name="op" enumeration="yes"/>
    <variable type="GPExpr" name="right"/>
  </class>
  <class name="UnaryGPExpr" base="GPExpr" shortName="unary">
    <variable type="GPPre" name="pre" enumeration="yes"/>
    <variable type="GPExpr" name="expr"/>
  </class>
  <class name="VariableGPExpr" base="GPExpr" shortName="variable">
    <variable type="PositiveInteger" name="index"/>
  </class>

  <enumeration name="GPExprEnumeration">
    <value name="binary"/>
    <value name="unary"/>
    <value name="variable"/>
  </enumeration>

  <class name="GPExprSampler" base="CompositeSampler"/>

  <class name="GPSandBox" base="WorkUnit">
    <variable type="Double" name="lambda"/>
    <variable type="PositiveInteger" name="numIterations"/>
    <variable type="PositiveInteger" name="populationSize"/>
    <variable type="PositiveInteger" name="numBests"/>
  </class>

</library>
