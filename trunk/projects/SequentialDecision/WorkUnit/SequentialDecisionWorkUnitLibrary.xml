<?xml version="1.0" encoding="UTF-8"?>

<library name="SequentialDecisionWorkUnit" directory="WorkUnit">

  <!-- LinearLearnableHeuristic -->
  <class name="SearchTreeNodeIndexFeatureGenerator" base="FeatureGenerator"/>

  <class name="HeuristicSearchTreeNodeFeaturesFunction" base="CompositeFunction"/>
  <class name="GenericClosedSearchTreeNodeFeaturesFunction" base="CompositeFunction"/>
  <class name="LinearLearnableSearchHeuristic" base="LearnableSearchHeuristic"/>

  <class name="SequentialDecisionSandBox" base="WorkUnit">
    <variable type="DecisionProblem" name="problem" shortName="p"/>
    <variable type="RankingLossFunction" name="rankingLoss" shortName="l" description="E.g. mostViolatedPair(hinge), allPairs(logBinomial)"/>
    <variable type="PositiveInteger" name="numInitialStates" shortName="n"/>
    <variable type="PositiveInteger" name="maxSearchNodes" shortName="m"/>
    <variable type="PositiveInteger" name="beamSize" shortName="b"/>
    <variable type="PositiveInteger" name="maxLearningIterations" shortName="i"/>
    <variable type="PositiveInteger" name="numPasses" shortName="N"/>
  </class>

  <!-- GO -->
  <class name="DecisionProblemStateActionsRankingCostsFunction" base="Function"/>
  <class name="DecisionProblemStateActionsRankingExample" base="CompositeFunction">
    <variable type="Function" name="actionsPerception"/>
  </class>
  
  <!-- Go Evaluator -->
  <class name="PositiveIntegerPairScoringScoreObject" base="ScoreObject">
    <variable type="ScalarVariableMean" name="predictionRate"/>
    <variable type="ScalarVariableStatistics" name="rankOfAction"/>
    <variable type="ScalarVariableMean" name="unsupervisedRate"/>
  </class>
  <class name="PositiveIntegerPairScoringEvaluator" base="SupervisedEvaluator"/>

  <class name="CallbackBasedEvaluator" base="Evaluator" abstract="yes">
    <variable type="Evaluator" name="evaluator"/>
  </class>
  <class name="GoEpisodeFunctionEvaluator" base="CallbackBasedEvaluator"/>

  <class name="GoEpisodeFunction" base="Function">
    <variable type="LearnerParameters" name="learningParameters"/>
    <variable type="Function" name="rankingExampleCreator"/>
    <variable type="Function" name="rankingMachine"/>
  </class>

  <!-- Go Sand Box -->
  <class name="GoSandBox" base="WorkUnit">
    <variable type="File" name="gamesDirectory"/>
    <variable type="PositiveInteger" name="maxCount"/>
    <variable type="PositiveInteger" name="numFolds"/>
    <variable type="LearnerParameters" name="learningParameters"/>
  </class>

  <!-- Go Features -->
  <class name="PositiveIntegerPairPositionFeature" base="FeatureGenerator"/>
  
  <template name="GoStatePreFeatures">
    <parameter name="globalFeaturesEnumeration" type="EnumValue"/>
    <parameter name="regionFeaturesEnumeration" type="EnumValue"/>
    <parameter name="actionFeaturesEnumeration" type="EnumValue"/>

    <variable type="GoState" name="state"/>
    <variable type="PositiveIntegerPairVector" name="previousActions"/>
    <variable type="GoBoard" name="board"/>
    <variable type="DoubleVector[globalFeaturesEnumeration,Double]" name="globalPrimaryFeatures"/>
    <variable type="ObjectMatrix[DoubleVector[regionFeaturesEnumeration,Double]]" name="fourConnexityGraphFeatures"/>
    <variable type="ObjectMatrix[DoubleVector[regionFeaturesEnumeration,Double]]" name="eightConnexityGraphFeatures"/>
    <variable type="ObjectMatrix[DoubleVector[actionFeaturesEnumeration,Double]]" name="actionPrimaryFeatures"/>
  </template>

  <class name="GoActionsPerception" base="CompositeFunction"/>

  <!-- Segment Matrix -->
  <template name="MatrixRegion" base="Object">
    <parameter name="elementsType" type="Variable"/>
    <variable type="PositiveInteger" name="index"/>
    <variable type="elementsType" name="value"/>
    <variable type="PositiveInteger" name="size"/>
    <variable type="ObjectVector[Pair[PositiveInteger, PositiveInteger]]" name="positions"/>
  </template>

  <template name="SegmentedMatrix" base="Matrix[PositiveInteger]">
    <parameter name="elementsType" type="Variable"/>
    <variable type="ObjectVector[MatrixRegion[elementsType]]" name="regions"/>
  </template>

  <class name="SegmentMatrixFunction" base="Function">
    <variable type="Boolean" name="use8Connexity"/>
  </class>

</library>
