<?xml version="1.0" encoding="UTF-8"?>

<library name="SequentialDecisionBandits" directory="Bandits">

  <!-- Discrete Bandit Decision Problem -->
  <class name="DiscreteBanditState" base="DecisionProblemState">
    <variable type="ObjectVector[Sampler]" name="samplers"/>
    <variable type="GenericVector[PositiveInteger]" name="availableActions"/>
  </class>
  <class name="DiscreteBanditDecisionProblem" base="DecisionProblem" abstract="yes">
    <variable type="PositiveInteger" name="numBandits"/>
  </class>

  <class name="DiscreteBanditInitialStateSampler" base="CompositeSampler">
    <variable type="PositiveInteger" name="numBandits"/>
  </class>

  <!-- Discrete Bandit Policies -->
  <class name="BanditStatistics" base="Object"/>
  <class name="DiscreteBanditPolicy" base="Object" abstract="yes"/>
  <class name="IndexBasedDiscreteBanditPolicy" base="DiscreteBanditPolicy" abstract="yes"/>

  <class name="GreedyDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="greedy">
    <constructor/>
  </class>
  
  <class name="UCB1DiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb1">
    <constructor arguments="double C"/>
    <variable type="Double" name="C"/>
  </class>

  <class name="UCB1TunedDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb1Bernoulli">
    <constructor/>
  </class>

  <class name="UCB1NormalDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb1Normal">
    <constructor/>
  </class>
   
  <class name="UCB2DiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucb2">
    <constructor arguments="double alpha"/>
    <variable type="Double" name="alpha"/>
  </class>

  <class name="UCBVDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ucbv">
    <constructor arguments="double c, double zeta"/>
    <variable type="Double" name="c"/>
    <variable type="Double" name="zeta"/>
  </class>

  <class name="EpsilonGreedyDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="epsilonGreedy">
    <constructor arguments="double c, double d"/>
    <variable type="Double" name="c"/>
    <variable type="Double" name="d"/>
  </class>

  <class name="KLUCBDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="klUcb">
    <constructor arguments="double c"/>
    <variable type="Double" name="c"/>
  </class>

  <class name="PowerDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="power">
    <constructor arguments="size_t maxPower, bool useSparseSampler"/>
    
    <variable type="PositiveInteger" name="maxPower"/>
    <variable type="Enumeration" name="parametersEnumeration" generated="yes"/>
    <variable type="DenseDoubleVector[EnumValue,Double]" name="parameters"/>
    <variable type="Boolean" name="useSparseSampler"/>
  </class>

  <enumeration name="GPExpressionDiscreteBanditPolicyVariables" shortName="gp">
    <value name="T"/>
    <value name="T_i"/>
    <value name="mean(R)"/>
    <value name="stddev(R)"/>
    <!--    <value name="min(R)"/>
    <value name="max(R)"/>
    <value name="ucb1-rightterm"/>
    <value name="ucb1tuned-rightterm"/> -->
  </enumeration>

  <class name="GPExpressionDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" shortName="ultimate">
    <constructor arguments="GPExpressionPtr indexFunction"/>
    <variable type="GPExpression" name="indexFunction"/>
  </class>

  <class name="BanditEDAOptimizerState" base="SamplerBasedOptimizerState">
    <constructor arguments="const SamplerPtr&amp; sampler, double autoSaveStateFrequency"/>
  </class>
  
  <class name="BanditEDAOptimizer" base="EDAOptimizer" shortName="beda">
    <constructor arguments="size_t numIterations, size_t populationSize, size_t numBests, size_t maxNumBandits, StoppingCriterionPtr stoppingCriterion, bool verbose" returnType="Optimizer"/>
  </class>

  <!-- Discrete Bandit Experiment -->
  <class name="EvaluateDiscreteBanditPolicyWorkUnit" base="WorkUnit">
    <variable type="PositiveInteger" name="numBandits"/>
    <variable type="PositiveInteger" name="maxTimeStep"/>
    <variable type="ObjectVector[DiscreteBanditState]" name="initialStates"/>
    <variable type="DiscreteBanditPolicy" name="policy"/>
    <variable type="PositiveInteger" name="numEstimationsPerBandit"/>
    <variable type="Boolean" name="verbose"/>
  </class>

  <class name="EvaluateDiscreteBanditPolicyParameters" base="Function">
    <variable type="DiscreteBanditPolicy" name="policy"/>
    <variable type="PositiveInteger" name="numBandits"/>
    <variable type="PositiveInteger" name="maxTimeStep"/>
    <variable type="ObjectVector[DiscreteBanditState]" name="initialStates"/>
    <variable type="Boolean" name="verbose"/>
  </class>
  
  <!-- Work Units -->
  <class name="DiscreteBanditExperiment" base="WorkUnit">
    <variable type="PositiveInteger" name="numBandits" shortName="k"/>
    <variable type="PositiveInteger" name="numTrainingProblems" shortName="training"/>
    <variable type="PositiveInteger" name="numTestingProblems" shortName="testing"/>
    <variable type="PositiveInteger" name="maxTimeStep" shortName="H"/>
  </class>
    
  <class name="SingleParameterIndexBasedDiscreteBanditPolicy" base="IndexBasedDiscreteBanditPolicy" abstract="yes">
    <variable type="Double" name="C"/>
  </class>
  <class name="Formula1IndexBasedDiscreteBanditPolicy" base="SingleParameterIndexBasedDiscreteBanditPolicy" shortName="formula1"/>
  <class name="Formula2IndexBasedDiscreteBanditPolicy" base="SingleParameterIndexBasedDiscreteBanditPolicy" shortName="formula2"/>
  <class name="Formula3IndexBasedDiscreteBanditPolicy" base="SingleParameterIndexBasedDiscreteBanditPolicy" shortName="formula3"/>
  <class name="Formula4IndexBasedDiscreteBanditPolicy" base="SingleParameterIndexBasedDiscreteBanditPolicy" shortName="formula4"/>
  <class name="Formula5IndexBasedDiscreteBanditPolicy" base="SingleParameterIndexBasedDiscreteBanditPolicy" shortName="formula5"/>
  <class name="Formula6IndexBasedDiscreteBanditPolicy" base="SingleParameterIndexBasedDiscreteBanditPolicy" shortName="formula6"/>
  <class name="Formula7IndexBasedDiscreteBanditPolicy" base="SingleParameterIndexBasedDiscreteBanditPolicy" shortName="formula7"/>

  <class name="FindBanditsFormula" base="WorkUnit">
    <variable type="PositiveInteger" name="problemIndex" shortName="p"/>
    <variable type="PositiveInteger" name="maxTimeStep" shortName="N"/>
    <variable type="PositiveInteger" name="numRunsPerEstimation" shortName="r"/>
 </class>

  <!-- MCTS Work Unit -->
  <class name="BanditsMCTSWorkUnit" base="WorkUnit">
    <variable type="PositiveInteger" name="numIterations" shortName="N"/>
    <variable type="PositiveInteger" name="maxDepth" shortName="D"/>
 </class>
  <class name="MCTSExpressionBuilderState" base="GPExpressionBuilderState">
    <variable type="ObjectVector[GPExpression]" name="expressions"/>
    <variable type="DenseDoubleVector[PositiveIntegerEnumeration,Double]" name="expressionScores"/>
  </class>
  
</library>

