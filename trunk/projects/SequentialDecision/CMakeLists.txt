INCLUDE_DIRECTORIES(
  ${LBCpp_SOURCE_DIR}/include
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_CURRENT_BINARY_DIR}
)

GENERATE_INTROSPECTION_CODE(Core/SequentialDecisionCoreLibrary.xml SequentialDecisionCoreLibrary.cpp)
GENERATE_INTROSPECTION_CODE(Problem/SequentialDecisionProblemLibrary.xml SequentialDecisionProblemLibrary.cpp)
GENERATE_INTROSPECTION_CODE(WorkUnit/SequentialDecisionWorkUnitLibrary.xml SequentialDecisionWorkUnitLibrary.cpp)
GENERATE_INTROSPECTION_CODE(Go/SequentialDecisionGoLibrary.xml SequentialDecisionGoLibrary.cpp)
GENERATE_INTROSPECTION_CODE(Bandits/SequentialDecisionBanditsLibrary.xml SequentialDecisionBanditsLibrary.cpp)
GENERATE_INTROSPECTION_CODE(GP/SequentialDecisionGPLibrary.xml SequentialDecisionGPLibrary.cpp)
GENERATE_INTROSPECTION_CODE(Luape/LuapeLibrary.xml LuapeLibrary.cpp)
GENERATE_INTROSPECTION_CODE(SequentialDecisionLibrary.xml SequentialDecisionLibrary.cpp)

SET(LBCPP_SEQUENTIAL_DECISION_CORE_SOURCES
  Core/DecisionProblem.h
  Core/DecisionProblem.cpp
  Core/Policy.h
  Core/SearchTree.h
  Core/SearchTreeNode.h
  Core/SearchTree.cpp
  Core/SearchHeuristic.h
  Core/SearchPolicy.h
  Core/SearchFunction.h
  Core/SearchFunctionOnlineLearner.h
  Core/SearchTreeEvaluator.h
  Core/BeamSearchOptimizer.h
  Core/NestedMonteCarloOptimizer.h  
  Core/SinglePlayerMCTSOptimizer.h
  Core/SequentialDecisionCoreLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/SequentialDecisionCoreLibrary.cpp
)

SET(LBCPP_SEQUENTIAL_DECISION_PROBLEM_SOURCES
  Problem/LinearPointPhysicProblem.h
  Problem/DamienDecisionProblem.h
  Problem/LuaDecisionProblemState.h
  Problem/SequentialDecisionProblemLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/SequentialDecisionProblemLibrary.cpp
)

SET(LBCPP_SEQUENTIAL_DECISION_PROBLEM_DAMIEN_SOURCES
  Problem/Damien/optimalControlProblem.hpp
  Problem/Damien/invertedPendulum.hpp
  Problem/Damien/HIV.hpp
)

SET(LBCPP_SEQUENTIAL_DECISION_WORK_UNIT_SOURCES
  WorkUnit/HIVSandBox.h
  WorkUnit/SequentialDecisionSandBox.h
  WorkUnit/GPSandBox.h
  WorkUnit/BBOptimization.h
  WorkUnit/AutoSGDSandBox.h
  WorkUnit/SequentialDecisionWorkUnitLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/SequentialDecisionWorkUnitLibrary.cpp
)

SET(LBCPP_SEQUENTIAL_DECISION_GP_SOURCES
  GP/GPExpression.h
  GP/GPExpression.cpp
  GP/GPExpressionSampler.h
  GP/GPExpressionBuilder.h
  GP/FormulaSearchProblem.h
  GP/GenerateUniqueFormulas.h
  GP/BanditFormulaOptimizer.h
  GP/BanditFormulaObjective.h
  GP/BanditNoParamObjective.h
  GP/LearningRuleFormulaObjective.h
  GP/PathsFormulaFeatureGenerator.h
  GP/OrdersFormulaFeatureGenerator.h
  GP/FormulaLearnAndSearch.h
  GP/SequentialDecisionGPLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/SequentialDecisionGPLibrary.cpp
)

SET(LBCPP_SEQUENTIAL_DECISION_BANDITS_SOURCES
  Bandits/DiscreteBanditDecisionProblem.h
  Bandits/DiscreteBanditPolicy.h
  Bandits/DiscreteBanditExperiment.h
  Bandits/FindBanditsFormula.h
  Bandits/EpsilonGreedyDiscreteBanditPolicy.h
  Bandits/UCB1DiscreteBanditPolicy.h
  Bandits/UCB2DiscreteBanditPolicy.h
  Bandits/UCBvDiscreteBanditPolicy.h
  Bandits/PowerDiscreteBanditPolicy.h
  Bandits/GPExpressionDiscreteBanditPolicy.h
#  Bandits/BanditsMCTSWorkUnit.h
  Bandits/SequentialDecisionBanditsLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/SequentialDecisionBanditsLibrary.cpp
)

SET(LBCPP_SEQUENTIAL_DECISION_GO_SOURCES
  Go/GoProblem.h
  Go/GoProblem.cpp
  Go/LoadSGFFileFunction.h
  Go/GoRegionPerception.h
  Go/GoActionsPerception.h
  Go/GoSupervisedEpisode.h
  Go/GoActionScoringEvaluator.h
  Go/GoSandBox.h
  Go/GoBoostingSandBox.h
  Go/GoPredictWorkUnit.h
  Go/GoSGFToGTPWorkUnit.h
  Go/GoInterface.h
  Go/GoInterface.cpp
  Go/SequentialDecisionGoLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/SequentialDecisionGoLibrary.cpp
)

SET(LBCPP_SEQUENTIAL_DECISION_LUAPE_SOURCES
  Luape/LuapeProblem.h
  Luape/LuapeProblem.cpp
  Luape/LuapeGraph.h
  Luape/LuapeGraph.cpp
  Luape/LuapeGraphBuilder.h
  Luape/LuapeFunction.h
  Luape/LuapeBatchLearner.h
  Luape/LuapeBatchLearner.cpp
  Luape/LuapeSandBox.h
  Luape/LuapeLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/LuapeLibrary.cpp
)

SET(LBCPP_SEQUENTIAL_DECISION_LUAPE_LEARNER_SOURCES
  Luape/AdaBoostLuapeLearner.h
  Luape/AdaBoostMHLuapeLearner.h
  Luape/LuapeGraphBuilderWeakLearner.h
)

SET(LBCPP_SEQUENTIAL_DECISION_SOURCES
  precompiled.h
  precompiled.cpp
  
  ${LBCPP_SEQUENTIAL_DECISION_CORE_SOURCES}
  ${LBCPP_SEQUENTIAL_DECISION_PROBLEM_SOURCES}
    ${LBCPP_SEQUENTIAL_DECISION_PROBLEM_DAMIEN_SOURCES}
  ${LBCPP_SEQUENTIAL_DECISION_WORK_UNIT_SOURCES}
  ${LBCPP_SEQUENTIAL_DECISION_GO_SOURCES}
  ${LBCPP_SEQUENTIAL_DECISION_GP_SOURCES}
  ${LBCPP_SEQUENTIAL_DECISION_BANDITS_SOURCES}
  ${LBCPP_SEQUENTIAL_DECISION_LUAPE_SOURCES}
    ${LBCPP_SEQUENTIAL_DECISION_LUAPE_LEARNER_SOURCES}

  SequentialDecisionLibrary.xml
  ${CMAKE_CURRENT_BINARY_DIR}/SequentialDecisionLibrary.cpp
)

SOURCE_GROUP(Core FILES ${LBCPP_SEQUENTIAL_DECISION_CORE_SOURCES})
SOURCE_GROUP(Problem FILES ${LBCPP_SEQUENTIAL_DECISION_PROBLEM_SOURCES})
SOURCE_SUB_GROUP(Problem Damien FILES ${LBCPP_SEQUENTIAL_DECISION_PROBLEM_DAMIEN_SOURCES})

SOURCE_GROUP(WorkUnit FILES ${LBCPP_SEQUENTIAL_DECISION_WORK_UNIT_SOURCES})
SOURCE_GROUP(Go FILES ${LBCPP_SEQUENTIAL_DECISION_GO_SOURCES})
SOURCE_GROUP(GP FILES ${LBCPP_SEQUENTIAL_DECISION_GP_SOURCES})
SOURCE_GROUP(Bandits FILES ${LBCPP_SEQUENTIAL_DECISION_BANDITS_SOURCES})
SOURCE_GROUP(Luape FILES ${LBCPP_SEQUENTIAL_DECISION_LUAPE_SOURCES})
SOURCE_SUB_GROUP(Luape Learner FILES ${LBCPP_SEQUENTIAL_DECISION_LUAPE_LEARNER_SOURCES})

GENERATE_LBCPP_PRECOMPILED(precompiled LBCPP_SEQUENTIAL_DECISION_SOURCES)

ADD_LIBRARY(sequentialdecision${NAME_FILE_SUFFIX} SHARED ${LBCPP_SEQUENTIAL_DECISION_SOURCES})
TARGET_LINK_LIBRARIES(sequentialdecision${NAME_FILE_SUFFIX} lbcpp-core${NAME_FILE_SUFFIX})
