#!/usr/bin/expect -f
set password [lrange $argv 0 0]
set dest [lrange $argv 1 1]
set filename [lrange $argv 2 2]
set excludefile [lrange $argv 3 3]
set timeout -1
spawn rsync -avz --delete --exclude-from=$excludefile $filename $dest
match_max 100000
expect "*?assword:*"
send -- "$password\r"
send -- "\r"
expect eof
 
