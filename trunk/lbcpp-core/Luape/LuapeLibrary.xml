<?xml version="1.0" encoding="UTF-8"?>

<library name="Luape" directory="Luape">

  <import name="Function"/>
  <import name="ExpressionBuilder"/>
  <import name="LuapeLearner"/>
  
  <include file="lbcpp/Luape/Function.h"/>
  <include file="lbcpp/Luape/Expression.h"/>
  <include file="lbcpp/Luape/LuapeInference.h"/>
  <include file="lbcpp/Luape/LuapeLearner.h"/>
  <include file="lbcpp/Luape/ExpressionBuilder.h"/>
    
  <!-- Luape Function -->
  <class name="Function" abstract="yes"/>
  <class name="HomogeneousUnaryFunction" base="Function" abstract="yes"/>
  <class name="HomogeneousBinaryFunction" base="Function" abstract="yes"/>
  
  <!-- Nodes -->
  <class name="Expression" base="Object" abstract="yes">
    <variable type="Type" name="type"/>
    <!-- <variable type="PositiveInteger" name="allocationIndex"/> -->
  </class>
  <class name="VariableExpression" base="Expression">
    <variable type="String" name="name"/>
    <variable type="PositiveInteger" name="inputIndex"/>
  </class>
  <class name="ConstantExpression" base="Expression">
    <variable type="Variable" name="value"/>
  </class>
  <class name="FunctionExpression" base="Expression">
    <variable type="Function" name="function"/>
    <variable type="ObjectVector[Expression]" name="arguments"/>
  </class>
  <class name="SequenceExpression" base="Expression" abstract="yes">
    <variable type="ObjectVector[Expression]" name="nodes"/>
  </class>
  <class name="ScalarSumExpression" base="SequenceExpression">
    <variable type="Boolean" name="convertToProbabilities"/>
    <variable type="Boolean" name="computeAverage"/>
  </class>
  <class name="VectorSumExpression" base="SequenceExpression">
    <variable type="Boolean" name="convertToProbabilities"/>
  </class>
  <class name="CreateSparseVectorExpression" base="SequenceExpression"/>
  <class name="TestExpression" base="Expression">
    <variable type="Expression" name="conditionNode"/>
    <variable type="Expression" name="failureNode"/>
    <variable type="Expression" name="successNode"/>
    <variable type="Expression" name="missingNode"/>
  </class>

  <!-- Cache -->
  <class name="ExpressionUniverse" base="Object"/>


  <!-- Inference -->
  <class name="LuapeInference" base="Object" abstract="yes">
<!--    <variable type="ExpressionUniverse" name="universe"/>
    <variable type="ObjectVector[VariableExpression]" name="inputs"/>
    <variable type="ObjectVector[Function]" name="functions"/>
    <variable type="Expression" name="node"/> --> <!--TODO: split LuapeInference from LuapeProblem-->
  </class>
  <class name="LuapeBinaryClassifier" base="LuapeInference">
    <constructor/>
  </class>
  <class name="LuapeClassifier" base="LuapeInference">
    <constructor/>
  </class>
  <class name="LuapeRanker" base="LuapeInference">
    <constructor/>
  </class>
  <class name="LuapeRegressor" base="LuapeInference">
    <constructor/>
  </class>

  <!-- Node Builders -->
  <class name="LuapeRPNSequence" base="Object">
    <variable type="ObjectVector[Object]" name="sequence"/>
  </class>
  
  <class name="ExpressionBuilder" base="Object" abstract="yes"/>
  <class name="StochasticNodeBuilder" base="ExpressionBuilder" abstract="yes">
    <variable type="PositiveInteger" name="numNodes"/>
  </class>
  <class name="SequentialNodeBuilder" base="StochasticNodeBuilder" abstract="yes">
    <variable type="PositiveInteger" name="complexity"/>
  </class>

  <!-- Learning objectives -->
  <class name="LearningObjective" base="Object" abstract="yes"/>
  <class name="SupervisedLearningObjective" base="LearningObjective" abstract="yes"/>
  <class name="RegressionLearningObjective" base="SupervisedLearningObjective"/>
  <class name="BinaryClassificationLearningObjective" base="SupervisedLearningObjective"/>
  <class name="ClassificationLearningObjective" base="SupervisedLearningObjective" abstract="yes"/>
  <class name="InformationGainBinaryLearningObjective" base="BinaryClassificationLearningObjective">
    <variable type="Boolean" name="normalize"/>
  </class>
  <class name="InformationGainLearningObjective" base="ClassificationLearningObjective">
    <variable type="Boolean" name="normalize"/>
  </class>

  <!-- Learners -->
  <class name="LuapeLearner" abstract="yes">
    <variable type="Boolean" name="verbose"/>
  </class>
  <class name="NodeBuilderBasedLearner" base="LuapeLearner" abstract="yes">
    <variable type="ExpressionBuilder" name="nodeBuilder"/>
  </class>
  <class name="IterativeLearner" base="LuapeLearner" abstract="yes">
    <variable type="PositiveInteger" name="maxIterations"/>
  </class>
  <class name="DecoratorLearner" base="LuapeLearner" abstract="yes">
    <variable type="LuapeLearner" name="decorated"/>
  </class>
  
</library>
