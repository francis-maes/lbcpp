<?xml version="1.0" encoding="UTF-8"?>

<file name="Type" directory="Data/Type">
  <namespace name="lbcpp">

    <type name="Variable" base="" implementation="TopLevelType"/>

    <!-- Builtin Types -->
    <type name="Nil" base="Variable" implementation="NilType"/>
    <type name="Boolean" base="Variable" implementation="BooleanType"/>
    <type name="Integer" base="Variable" implementation="IntegerType"/>
      <type name="PositiveInteger" base="Integer"/>
        <type name="VariableIndex" base="PositiveInteger"/>

    <type name="EnumValue" base="Integer" implementation="IntegerType"/>

    <type name="Double" base="Variable" implementation="DoubleType"/>
      <type name="PositiveDouble" base="Double"/>
        <type name="NegativeLogProbability" base="PositiveDouble"/>
      <type name="Probability" base="Double" implementation="ProbabilityType"/>

    <type name="String" base="Variable" implementation="StringType"/>
      <type name="File" base="String" implementation="FileType"/>
    
    <!-- Object -->
    <class name="Object" base="Variable" abstract="yes">
      <!-- <variable type="Class" name="thisClass"/> -->
    </class>
    
    <class name="NameableObject" base="Object" abstract="yes">
      <variable type="String" name="name"/>
    </class>

    <!-- Type -->
    <class name="Type" base="NameableObject" abstract="yes">
      <variable type="Type" name="baseType"/>
      <variable type="TemplateType" name="templateType"/>
      <!-- <variable type="ObjectVector[Type]" name="templateArguments"/> -->
      <code>
        virtual VariableValue createFromString(const String&amp; value, MessageCallback&amp; callback) const
          {return VariableValue((Object* )Type::get(value, callback), false);}

        virtual VariableValue createFromXml(XmlImporter&amp; importer) const
          {return createFromString(importer.getAllSubText(), importer.getCallback());}
          
        virtual void destroy(VariableValue&amp; value) const
          {value.clearObject(false);}

        virtual void copy(VariableValue&amp; dest, const VariableValue&amp; source) const
          {dest.setObject(source.getObjectPointer(), false);}
      </code>
    </class>

    <class name="Enumeration" base="Type" abstract="yes">
      <variable type="String" name="oneLetterCodes"/>
      <code>
        virtual VariableValue createFromString(const String&amp; value, MessageCallback&amp; callback) const
          {return Type::createFromString(value, callback);}

        virtual VariableValue createFromXml(XmlImporter&amp; importer) const
          {return Type::createFromXml(importer);}

        virtual void destroy(VariableValue&amp; value) const
          {Type::destroy(value);}

        virtual void copy(VariableValue&amp; dest, const VariableValue&amp; source) const
          {Type::copy(dest, source);}
      </code>
    </class>

    <class name="Class" base="Type" abstract="yes"/>
    <class name="DefaultClass" base="Class"/>


    <!-- Template Type -->
    <class name="TemplateType" base="NameableObject" abstract="yes"/>
    
  </namespace>
</file>
