<?xml version="1.0" encoding="UTF-8"?>

<library name="Luape" directory="Luape">

  <import name="LuapeBoostingLearner"/>
  <import name="LuapeBoostingWeakLearner"/>
  
  <include file="lbcpp/Luape/LuapeFunction.h"/>
  <include file="lbcpp/Luape/LuapeNode.h"/>
  <include file="lbcpp/Luape/LuapeInference.h"/>
  <include file="lbcpp/Luape/LuapeLearner.h"/>
  <include file="lbcpp/Luape/LuapeBatchLearner.h"/>
    
  <!-- Luape Function -->
  <class name="LuapeFunction" abstract="yes"/>
  <class name="HomogeneousUnaryLuapeFunction" base="LuapeFunction" abstract="yes"/>
  <class name="HomogeneousBinaryLuapeFunction" base="LuapeFunction" abstract="yes"/>
  <class name="BinaryBooleanLuapeFunction" base="HomogeneousBinaryLuapeFunction" abstract="yes"/>
    <class name="AndBooleanLuapeFunction" base="BinaryBooleanLuapeFunction">
      <constructor returnType="LuapeFunction"/>
    </class>
    <class name="EqualBooleanLuapeFunction" base="BinaryBooleanLuapeFunction">
      <constructor returnType="LuapeFunction"/>
    </class>

  <class name="UnaryDoubleLuapeFunction" base="HomogeneousBinaryLuapeFunction" abstract="yes"/>
  <class name="NormalizerLuapeFunction" base="HomogeneousUnaryLuapeFunction">
    <constructor returnType="LuapeFunction"/>
  </class>
  
  <class name="BinaryDoubleLuapeFunction" base="HomogeneousBinaryLuapeFunction" abstract="yes"/>
    <class name="AddDoubleLuapeFunction" base="BinaryDoubleLuapeFunction">
      <constructor returnType="LuapeFunction"/>
    </class>
    <class name="SubDoubleLuapeFunction" base="BinaryDoubleLuapeFunction">
      <constructor returnType="LuapeFunction"/>
    </class>
    <class name="MulDoubleLuapeFunction" base="BinaryDoubleLuapeFunction">
      <constructor returnType="LuapeFunction"/>
    </class>
    <class name="DivDoubleLuapeFunction" base="BinaryDoubleLuapeFunction">
      <constructor returnType="LuapeFunction"/>
    </class>
    <class name="GreaterThanDoubleLuapeFunction" base="LuapeFunction">
      <constructor returnType="LuapeFunction"/>
    </class>
  <class name="EqualsConstantEnumLuapeFunction" base="LuapeFunction">
    <constructor arguments="const Variable&amp; value"/>
    <variable type="Variable" name="value"/>
  </class>
  <class name="GetVariableLuapeFunction" base="LuapeFunction">
    <constructor arguments="size_t variableIndex"/>
    <variable type="PositiveInteger" name="variableIndex"/>
  </class>
  <class name="StumpLuapeFunction" base="LuapeFunction">
    <constructor arguments="double threshold"/>
    <variable type="Double" name="threshold"/>
  </class>
  
  <!-- Nodes -->
  <class name="LuapeNode" base="Object" abstract="yes">
    <variable type="Type" name="type"/>
    <variable type="PositiveInteger" name="allocationIndex"/>
  </class>
  <class name="LuapeInputNode" base="LuapeNode">
    <variable type="String" name="name"/>
  </class>
  <class name="LuapeConstantNode" base="LuapeNode">
    <variable type="Variable" name="value"/>
  </class>
  <class name="LuapeFunctionNode" base="LuapeNode">
    <variable type="LuapeFunction" name="function"/>
    <variable type="ObjectVector[LuapeNode]" name="arguments"/>
  </class>
  <class name="LuapeSequenceNode" base="LuapeNode" abstract="yes">
    <variable type="ObjectVector[LuapeNode]" name="nodes"/>
  </class>
  <class name="LuapeScalarSumNode" base="LuapeSequenceNode"/>
  <class name="LuapeVectorSumNode" base="LuapeSequenceNode"/>
  <class name="LuapeTestNode" base="LuapeNode">
    <variable type="LuapeNode" name="conditionNode"/>
    <variable type="LuapeNode" name="successNode"/>
    <variable type="LuapeNode" name="failureNode"/>
    <variable type="LuapeNode" name="missingNode"/>
  </class>

  <!-- Cache -->
  <class name="LuapeNodeUniverse" base="Object"/>


  <!-- Inference -->
  <class name="LuapeInference" base="Function" abstract="yes">
    <variable type="LuapeNodeUniverse" name="universe"/>
    <variable type="ObjectVector[LuapeInputNode]" name="inputs"/>
    <variable type="ObjectVector[Function]" name="functions"/>
    <variable type="LuapeNode" name="node"/>
  </class>
  <class name="LuapeBinaryClassifier" base="LuapeInference">
    <constructor/>
  </class>
  <class name="LuapeClassifier" base="LuapeInference">
    <constructor/>
  </class>
  <class name="LuapeRanker" base="LuapeInference">
    <constructor/>
  </class>
  <class name="LuapeRegressor" base="LuapeInference">
    <constructor/>
  </class>

  <class name="BoostingWeakLearner" base="Object" abstract="yes"/>


  <!-- Strong Learners -->
  <class name="LuapeLearner" abstract="yes"/>
  <class name="BoostingLearner" base="LuapeLearner" abstract="yes">
    <variable type="BoostingWeakLearner" name="weakLearner"/>
  </class>

  <!-- Wrapper to classical LBC++ learner -->
  <class name="LuapeBatchLearner" base="BatchLearner">
    <variable type="LuapeLearner" name="learner"/>
    <variable type="PositiveInteger" name="maxIterations"/>
  </class>
  
</library>
